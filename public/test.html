<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <title>API POST 测试工具</title>
    <style>
        body { font-family: system-ui, sans-serif; max-width: 800px; margin: 2rem auto; padding: 0 1rem; }
        .card { border: 1px solid #ccc; padding: 1.5rem; border-radius: 8px; margin-bottom: 1rem; }
        button { background: #0070f3; color: white; border: none; padding: 0.5rem 1rem; border-radius: 4px; cursor: pointer; }
        button:hover { background: #0051a2; }
        pre { background: #f5f5f5; padding: 1rem; overflow-x: auto; border-radius: 4px; }
        label { display: block; margin-bottom: 0.5rem; font-weight: bold; }
        input, select { margin-bottom: 1rem; padding: 0.5rem; width: 100%; max-width: 300px; }
    </style>
</head>
<body>
    <h1>API 调试控制台</h1>

    <div class="card">
        <h2>1. 触发采集 (Collect)</h2>
        <label>每次采集数量 (Limit):</label>
        <input type="number" id="limit" value="10">
        <button onclick="sendPost('/api/collect', { limit: parseInt(document.getElementById('limit').value) })">发送 POST 请求</button>
    </div>

    <div class="card">
        <h2>2. 触发生成 (Generate)</h2>
        <label>项目标题 (Title):</label>
        <input type="text" id="title" value="My Awesome Tool">
        <button onclick="sendPost('/api/generate', { title: document.getElementById('title').value })">发送 POST 请求</button>
    </div>

    <div class="card">
        <h2>响应结果</h2>
        <pre id="output">等待请求...</pre>
    </div>

    <script>
        async function sendPost(url, data) {
            const out = document.getElementById('output');
            out.textContent = '正在发送请求...';
            try {
                const res = await fetch(url, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(data)
                });
                const json = await res.json();
                out.textContent = JSON.stringify(json, null, 2);
            } catch (e) {
                out.textContent = 'Error: ' + e.message;
            }
        }
    </script>
</body>
</html>